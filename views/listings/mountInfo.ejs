<%- layout("/layouts/boilerplate") %>

<style>
  .filter p {
    font-size: 0.9rem;
  }

  .listing-card img {
    width: 100%;
    height: 18rem;
    object-fit: cover;
  }

  @media (max-width: 576px) {
    .filter p {
      font-size: 0.75rem;
    }

    .listing-card img {
      height: 14rem;
    }
  }
</style>


<body>
  <div class="container mt-4">
    <!-- Results Count -->
    <h3 class="mb-4"><%= foundListings.length %> Results found for <%= category %></h3>

    <!-- Filters -->
    <div id="filters" class="d-flex flex-wrap gap-3 justify-content-center mb-4">
      <% const categories = [ /* your categories array goes here */ ]; %>

      <% categories.forEach(cat => { %>
        <div class="filter text-center">
          <a href="/listings/mountInfo?category=<%= cat.name %>" class="text-decoration-none text-dark">
            <div>
              <i class="fa<%= cat.brand ? '-brands' : cat.regular ? '-regular' : '-solid' %> <%= cat.icon %> fs-4"></i>
            </div>
            <p><%= cat.name %></p>
          </a>
        </div>
      <% }) %>
    </div>

    <!-- Listings -->
    <div class="row row-cols-lg-4 row-cols-md-3 row-cols-sm-2 row-cols-1 g-4">
      <% for (let listing of foundListings) { %>
        <div class="col">
          <a href="/listings/<%= listing._id %>" class="text-decoration-none text-dark">
            <div class="card listings-effect listing-card h-100 border-0 shadow-sm rounded-4 overflow-hidden">
              <img
                src="<%= listing.image.url %>"
                class="card-img-top"
                alt="listing image"
                style="height: 18rem; object-fit: cover;"
              />
              <div class="card-body">
                <p class="card-text">
                  <b><%= listing.title %></b><br />
                  â‚¹<%= listing.price.toLocaleString('en-IN') %> / night
                  <span class="text-muted small">+18% GST</span>
                </p>
              </div>
            </div>
          </a>
        </div>
      <% } %>
    </div>
  </div>
</body>
